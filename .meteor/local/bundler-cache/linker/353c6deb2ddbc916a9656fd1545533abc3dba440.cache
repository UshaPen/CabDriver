[{"type":"js","data":"/* Imports for global scope */\n\nGoogleMaps = Package['dburles:google-maps'].GoogleMaps;\nGeolocation = Package['mdg:geolocation'].Geolocation;\nMongo = Package.mongo.Mongo;\nSession = Package.session.Session;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nLog = Package.logging.Log;\nReload = Package.reload.Reload;\nRandom = Package.random.Random;\nEJSON = Package.ejson.EJSON;\nSpacebars = Package.spacebars.Spacebars;\ncheck = Package.check.check;\nMatch = Package.check.Match;\nECMAScript = Package.ecmascript.ECMAScript;\nRouter = Package['iron:router'].Router;\nRouteController = Package['iron:router'].RouteController;\n_ = Package.underscore._;\nMeteor = Package.meteor.Meteor;\nWebApp = Package.webapp.WebApp;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nTemplate = Package.templating.Template;\nbabelHelpers = Package['babel-runtime'].babelHelpers;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nPromise = Package.promise.Promise;\nAccounts = Package['accounts-base'].Accounts;\nAccountsClient = Package['accounts-base'].AccountsClient;\nIron = Package['iron:core'].Iron;\nAutoupdate = Package.autoupdate.Autoupdate;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"(function(){\nTemplate.body.addContent((function() {\n  var view = this;\n  return \"\";\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"map\");\nTemplate[\"map\"] = new Template(\"Template.map\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"map-container\"\n  }, \"\\n  \", Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  }), \"\\n  \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"geolocationError\"));\n  }, function() {\n    return [ \"\\n      \", Blaze._TemplateWith(function() {\n      return {\n        name: Spacebars.call(\"map\"),\n        options: Spacebars.call(view.lookup(\"mapOptions\"))\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"googleMap\"));\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      Geolocation failed: \", Blaze.View(\"lookup:geolocationError\", function() {\n      return Spacebars.mustache(view.lookup(\"geolocationError\"));\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"registerCab\");\nTemplate[\"registerCab\"] = new Template(\"Template.registerCab\", (function() {\n  var view = this;\n  return HTML.Raw('<h2>Cab Driver Registration Form</h2>\\n\t<form class=\"registerCab\">\\n        <p>Email: <input type=\"email\" name=\"email\"></p>\\n        <p>Password: <input type=\"password\" name=\"password\"></p>\\n\t\t<p>Name: <input type=\"text\" name=\"usrname\"></p>\\n\\n\t\t<p>Mobile: <input type=\"text\" name=\"mobile\"></p>\\n\t\t<p><input type=\"text\" name=\"typeofuser\" id=\"hidden_typeofuser\" value=\"cab_driver\"></p>\\n\t\t<p>Latitude Location of your Service<input type=\"text\" name=\"latitude\" id=\"latitude\" placeholder=\"Enter your service latitude\"></p>\\n\t\t<p>Longitude Location of your Service<input type=\"text\" name=\"longitude\" id=\"longitude\" placeholder=\"Enter your service longitude\"></p>\\n\t\t\t\\n        <p><input type=\"submit\" value=\"Register\"></p>\\n    </form>');\n}));\n\nTemplate.__checkName(\"registerPass\");\nTemplate[\"registerPass\"] = new Template(\"Template.registerPass\", (function() {\n  var view = this;\n  return HTML.Raw('<h2>Passengers Registration Form</h2>\\n\t<form class=\"registerPass\">\\n        <p>Email: <input type=\"email\" name=\"email\"></p>\\n        <p>Password: <input type=\"password\" name=\"password\"></p>\\n\t\t<p>Name: <input type=\"text\" name=\"usrname\"></p>\\n\\n\t\t<p>Mobile: <input type=\"text\" name=\"mobile\"></p>\\n\t\t<p><input type=\"text\" name=\"typeofuser\" id=\"hidden_typeofuser\" value=\"passenger\"></p>\\n        <p><input type=\"submit\" value=\"Register\"></p>\\n    </form>');\n}));\n\nTemplate.__checkName(\"login\");\nTemplate[\"login\"] = new Template(\"Template.login\", (function() {\n  var view = this;\n  return HTML.Raw('<h2>Login</h2>\\n\t<form class=\"login\">\\n\t\t<div class=\"row\">\\n\t\t\t<div class=\"form-group\">\\n\t            <label for=\"email\">Email</label>\\n\t            <input type=\"email\" name=\"email\">\\n\t\t    </div>    <br><br>\\n\t\t\t<div class=\"form-group\">\\n\t            <label for=\"password\">Password</label>\\n\t            <input type=\"password\" name=\"password\">\\n\t\t    </div>\\n        <p><input type=\"submit\" value=\"Login\"></p>\\n\t\t</div>\\n    </form>');\n}));\n\nTemplate.__checkName(\"home\");\nTemplate[\"home\"] = new Template(\"Template.home\", (function() {\n  var view = this;\n  return HTML.Raw(\"<p>Welcome to the Devois Cab application.</p>\");\n}));\n\nTemplate.__checkName(\"navigation\");\nTemplate[\"navigation\"] = new Template(\"Template.navigation\", (function() {\n  var view = this;\n  return HTML.UL({\n    \"class\": \"navlist\"\n  }, \"\\n    \", HTML.LI(HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), Spacebars.kw({\n        route: \"home\"\n      }));\n    }\n  }, \"Home\")), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ \"\\n        \", HTML.LI(HTML.A({\n      href: \"#\",\n      \"class\": \"logout\"\n    }, \"Logout\")), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.LI(HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), Spacebars.kw({\n          route: \"registerCab\"\n        }));\n      }\n    }, \"If you are a Cab Driver Register Yourself Here\")), \"\\n\t\t\", HTML.LI(HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), Spacebars.kw({\n          route: \"registerPass\"\n        }));\n      }\n    }, \"If you are a Passenger to avail Devois Cab Driving Register Yourself Here\")), \"\\n        \", HTML.LI(HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), Spacebars.kw({\n          route: \"login\"\n        }));\n      }\n    }, \"Login\")), \"\\n    \" ];\n  }), \"\\n\t\");\n}));\n\nTemplate.__checkName(\"main\");\nTemplate[\"main\"] = new Template(\"Template.main\", (function() {\n  var view = this;\n  return [ HTML.SPAN(\"\t\", HTML.CENTER(HTML.Raw(\"<h1>Devois</h1>\"), \"\\n\t\", HTML.Raw(\"<h1>Welcome To CAB Booking</h1>\"), \"\\n\t\", HTML.Raw(\"<p> Login to Access the App </p>\"), \"\\n\t\", Spacebars.include(view.lookupTemplate(\"navigation\")), \"\\n\t\", Spacebars.include(view.lookupTemplate(\"yield\")), \"  \\n\t\", HTML.Raw(\"<hr>\")), \"\\n\t\"), HTML.Raw(\"\\n\t<p>Copyright &copy; Devois, 2014-2015.</p>\") ];\n}));\n\n}).call(this);\n","servePath":"/template.googlemaps-geolocation.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/template.googlemaps-geolocation.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/template.googlemaps-geolocation.js","sourcesContent":["\nTemplate.body.addContent((function() {\n  var view = this;\n  return \"\";\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"map\");\nTemplate[\"map\"] = new Template(\"Template.map\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"map-container\"\n  }, \"\\n  \", Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  }), \"\\n  \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"geolocationError\"));\n  }, function() {\n    return [ \"\\n      \", Blaze._TemplateWith(function() {\n      return {\n        name: Spacebars.call(\"map\"),\n        options: Spacebars.call(view.lookup(\"mapOptions\"))\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"googleMap\"));\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      Geolocation failed: \", Blaze.View(\"lookup:geolocationError\", function() {\n      return Spacebars.mustache(view.lookup(\"geolocationError\"));\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"registerCab\");\nTemplate[\"registerCab\"] = new Template(\"Template.registerCab\", (function() {\n  var view = this;\n  return HTML.Raw('<h2>Cab Driver Registration Form</h2>\\n\t<form class=\"registerCab\">\\n        <p>Email: <input type=\"email\" name=\"email\"></p>\\n        <p>Password: <input type=\"password\" name=\"password\"></p>\\n\t\t<p>Name: <input type=\"text\" name=\"usrname\"></p>\\n\\n\t\t<p>Mobile: <input type=\"text\" name=\"mobile\"></p>\\n\t\t<p><input type=\"text\" name=\"typeofuser\" id=\"hidden_typeofuser\" value=\"cab_driver\"></p>\\n\t\t<p>Latitude Location of your Service<input type=\"text\" name=\"latitude\" id=\"latitude\" placeholder=\"Enter your service latitude\"></p>\\n\t\t<p>Longitude Location of your Service<input type=\"text\" name=\"longitude\" id=\"longitude\" placeholder=\"Enter your service longitude\"></p>\\n\t\t\t\\n        <p><input type=\"submit\" value=\"Register\"></p>\\n    </form>');\n}));\n\nTemplate.__checkName(\"registerPass\");\nTemplate[\"registerPass\"] = new Template(\"Template.registerPass\", (function() {\n  var view = this;\n  return HTML.Raw('<h2>Passengers Registration Form</h2>\\n\t<form class=\"registerPass\">\\n        <p>Email: <input type=\"email\" name=\"email\"></p>\\n        <p>Password: <input type=\"password\" name=\"password\"></p>\\n\t\t<p>Name: <input type=\"text\" name=\"usrname\"></p>\\n\\n\t\t<p>Mobile: <input type=\"text\" name=\"mobile\"></p>\\n\t\t<p><input type=\"text\" name=\"typeofuser\" id=\"hidden_typeofuser\" value=\"passenger\"></p>\\n        <p><input type=\"submit\" value=\"Register\"></p>\\n    </form>');\n}));\n\nTemplate.__checkName(\"login\");\nTemplate[\"login\"] = new Template(\"Template.login\", (function() {\n  var view = this;\n  return HTML.Raw('<h2>Login</h2>\\n\t<form class=\"login\">\\n\t\t<div class=\"row\">\\n\t\t\t<div class=\"form-group\">\\n\t            <label for=\"email\">Email</label>\\n\t            <input type=\"email\" name=\"email\">\\n\t\t    </div>    <br><br>\\n\t\t\t<div class=\"form-group\">\\n\t            <label for=\"password\">Password</label>\\n\t            <input type=\"password\" name=\"password\">\\n\t\t    </div>\\n        <p><input type=\"submit\" value=\"Login\"></p>\\n\t\t</div>\\n    </form>');\n}));\n\nTemplate.__checkName(\"home\");\nTemplate[\"home\"] = new Template(\"Template.home\", (function() {\n  var view = this;\n  return HTML.Raw(\"<p>Welcome to the Devois Cab application.</p>\");\n}));\n\nTemplate.__checkName(\"navigation\");\nTemplate[\"navigation\"] = new Template(\"Template.navigation\", (function() {\n  var view = this;\n  return HTML.UL({\n    \"class\": \"navlist\"\n  }, \"\\n    \", HTML.LI(HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"pathFor\"), Spacebars.kw({\n        route: \"home\"\n      }));\n    }\n  }, \"Home\")), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ \"\\n        \", HTML.LI(HTML.A({\n      href: \"#\",\n      \"class\": \"logout\"\n    }, \"Logout\")), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.LI(HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), Spacebars.kw({\n          route: \"registerCab\"\n        }));\n      }\n    }, \"If you are a Cab Driver Register Yourself Here\")), \"\\n\t\t\", HTML.LI(HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), Spacebars.kw({\n          route: \"registerPass\"\n        }));\n      }\n    }, \"If you are a Passenger to avail Devois Cab Driving Register Yourself Here\")), \"\\n        \", HTML.LI(HTML.A({\n      href: function() {\n        return Spacebars.mustache(view.lookup(\"pathFor\"), Spacebars.kw({\n          route: \"login\"\n        }));\n      }\n    }, \"Login\")), \"\\n    \" ];\n  }), \"\\n\t\");\n}));\n\nTemplate.__checkName(\"main\");\nTemplate[\"main\"] = new Template(\"Template.main\", (function() {\n  var view = this;\n  return [ HTML.SPAN(\"\t\", HTML.CENTER(HTML.Raw(\"<h1>Devois</h1>\"), \"\\n\t\", HTML.Raw(\"<h1>Welcome To CAB Booking</h1>\"), \"\\n\t\", HTML.Raw(\"<p> Login to Access the App </p>\"), \"\\n\t\", Spacebars.include(view.lookupTemplate(\"navigation\")), \"\\n\t\", Spacebars.include(view.lookupTemplate(\"yield\")), \"  \\n\t\", HTML.Raw(\"<hr>\")), \"\\n\t\"), HTML.Raw(\"\\n\t<p>Copyright &copy; Devois, 2014-2015.</p>\") ];\n}));\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// googlemaps-geolocation.js                                           //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n                                                                       //\n                                                                       //\nif (Meteor.isServer) {                                                 // 3\n\t// for setting extra fields other then username and password in accounts-ui\n\tAccounts.onCreateUser(function (options, user) {                      // 5\n\t\tif (options.secretAttribute) user.secretAttribute = options.secretAttribute;\n                                                                       //\n\t\tif (options.profile) user.profile = options.profile;                 // 9\n                                                                       //\n\t\treturn user;                                                         // 12\n\t});                                                                   //\n}                                                                      //\n                                                                       //\nRouter.configure({                                                     // 18\n\tlayoutTemplate: 'main'                                                // 19\n});                                                                    //\n                                                                       //\nif (Meteor.isClient) {                                                 // 23\n\tvar flag = 'true';                                                    // 24\n\tvar MAP_ZOOM = 12;                                                    // 25\n                                                                       //\n\t//Session.set('apimaps', false);                                      //\n\tSession.set('epoly', false);                                          // 28\n                                                                       //\n\tMeteor.startup(function () {                                          // 30\n\t\tGoogleMaps.load();                                                   // 31\n\t\t/*                                                                   //\n  \t$.getScript('http://maps.google.com/maps/api/js?sensor=false', function(){\n  \t// script has loaded                                                //\n  \t  Session.set('apimaps', true);                                     //\n  \t });                                                                //\n  */                                                                   //\n\t\t$.getScript('http://www.geocodezip.com/scripts/v3_epoly.js', function () {\n\t\t\t// script has loaded                                                //\n\t\t\tSession.set('epoly', true);                                         // 40\n\t\t});                                                                  //\n\t});                                                                   //\n                                                                       //\n\tTemplate.map.onCreated(function () {                                  // 46\n\t\tvar self = this;                                                     // 47\n                                                                       //\n\t\tGoogleMaps.ready('map', function (map) {                             // 49\n\t\t\t/*\t\t  google.maps.event.addListener(map.instance, 'click', function(event) {\n   \t\t  Markers.insert({ lat: event.latLng.lat(), lng: event.latLng.lng() });\n   \t\t  //console.log(\"clicked\");                                       //\n   \t});                                                                //\n   */                                                                  //\n\t\t\tvar markers = {};                                                   // 55\n\t\t\tvar i = 1;                                                          // 56\n\t\t\t/*\tMarkers.find().observe({                                         //\n   \t\tadded: function(document) {                                       //\n   \t\t\t// Create a marker for this document                             //\n   \t\t\ti++;                                                             //\n   \t\t    window.setTimeout(function() {                                //\n   \t\t    var marker = new google.maps.Marker({                         //\n   \t\t\t  draggable: true,                                               //\n   \t\t\t  animation: google.maps.Animation.DROP,                         //\n   \t\t\t  position: new google.maps.LatLng(document.lat, document.lng),  //\n   \t\t\t  map: map.instance,                                             //\n   \t\t\t  id: document._id                                               //\n   \t\t\t});                                                              //\n   \t\t\t}, i*200);                                                       //\n   \t    }                                                              //\n   \t});                                                                //\n   \t*/                                                                 //\n\t\t\tMeteor.users.find().observe({                                       // 73\n\t\t\t\tadded: function (document) {                                       // 74\n\t\t\t\t\t// Create a marker for this document                              //\n\t\t\t\t\ti++;                                                              // 76\n\t\t\t\t\twindow.setTimeout(function () {                                   // 77\n\t\t\t\t\t\tvar marker = new google.maps.Marker({                            // 78\n\t\t\t\t\t\t\tdraggable: true,                                                // 79\n\t\t\t\t\t\t\tanimation: google.maps.Animation.DROP,                          // 80\n\t\t\t\t\t\t\tposition: new google.maps.LatLng(document.profile.coordinates.lat, document.profile.coordinates.lng),\n\t\t\t\t\t\t\tmap: map.instance,                                              // 82\n\t\t\t\t\t\t\tid: document._id                                                // 83\n\t\t\t\t\t\t});                                                              //\n\t\t\t\t\t}, i * 200);                                                      //\n\t\t\t\t}                                                                  //\n\t\t\t});                                                                 //\n                                                                       //\n\t\t\tgoogle.maps.event.addListener(map.instance, 'click', function (event) {\n                                                                       //\n\t\t\t\tif (Session.get(\"passid\") === Meteor.userId()) {                   // 93\n\t\t\t\t\tvar passengerlat = event.latLng.lat();                            // 94\n\t\t\t\t\tvar passengerLng = event.latLng.lng();                            // 95\n\t\t\t\t\tconsole.log(\"clicked pannenger\");                                 // 96\n\t\t\t\t\tconsole.log(event.latLng.lat());                                  // 97\n\t\t\t\t\tSession.set(\"passlat\", event.latLng.lat());                       // 98\n\t\t\t\t\tSession.set(\"passlng\", event.latLng.lng());                       // 99\n\t\t\t\t\tconsole.log(event.latLng.lng());                                  // 100\n\t\t\t\t\tif (flag == 'true') {                                             // 101\n\t\t\t\t\t\tvar passmarker = new google.maps.Marker({                        // 102\n\t\t\t\t\t\t\tdraggable: true,                                                // 103\n\t\t\t\t\t\t\tanimation: google.maps.Animation.DROP,                          // 104\n\t\t\t\t\t\t\tposition: new google.maps.LatLng(event.latLng.lat(), event.latLng.lng()),\n\t\t\t\t\t\t\tmap: map.instance,                                              // 106\n\t\t\t\t\t\t\ticon: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'   // 107\n\t\t\t\t\t\t});                                                              //\n\t\t\t\t\t\tflag = 'false';                                                  // 109\n\t\t\t\t\t}                                                                 //\n\t\t\t\t\tgoogle.maps.LatLng.prototype.distanceFrom = function (lat_lng) {  // 111\n\t\t\t\t\t\tvar lat = [this.lat(), lat_lng.lat()];                           // 112\n\t\t\t\t\t\tvar lng = [this.lng(), lat_lng.lng()];                           // 113\n\t\t\t\t\t\tvar R = 6378137;                                                 // 114\n\t\t\t\t\t\tvar dLat = (lat[1] - lat[0]) * Math.PI / 180;                    // 115\n\t\t\t\t\t\tvar dLng = (lng[1] - lng[0]) * Math.PI / 180;                    // 116\n\t\t\t\t\t\tvar a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat[0] * Math.PI / 180) * Math.cos(lat[1] * Math.PI / 180) * Math.sin(dLng / 2) * Math.sin(dLng / 2);\n\t\t\t\t\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));          // 120\n\t\t\t\t\t\tvar d = R * c;                                                   // 121\n\t\t\t\t\t\treturn d;                                                        // 122\n\t\t\t\t\t};                                                                //\n\t\t\t\t\tvar cabloc = [];                                                  // 124\n\t\t\t\t\tvar distarry = [];                                                // 125\n\t\t\t\t\tvar passpos = new google.maps.LatLng(Session.get(\"passlat\"), Session.get(\"passlng\"));\n\t\t\t\t\tvar data = Markers.find().fetch();                                // 127\n                                                                       //\n\t\t\t\t\tfor (var k = 0; k < data.length; k++) {                           // 129\n\t\t\t\t\t\tcabloc[k] = new google.maps.LatLng(data[k].lat, data[k].lng);    // 130\n\t\t\t\t\t\tdistarry[k] = cabloc[k].distanceFrom(passpos);                   // 131\n\t\t\t\t\t}                                                                 //\n\t\t\t\t\tvar minval = _.min(distarry);                                     // 134\n\t\t\t\t\tvar indx = _.indexOf(distarry, minval);                           // 135\n\t\t\t\t\tvar nearestcab = new google.maps.LatLng(data[indx].lat, data[indx].lng);\n\t\t\t\t\tpolyline = new google.maps.Polyline({                             // 137\n\t\t\t\t\t\tpath: [nearestcab, passpos],                                     // 138\n\t\t\t\t\t\tstrokeColor: \"#FF0000\",                                          // 139\n\t\t\t\t\t\tstrokeOpacity: 0.5,                                              // 140\n\t\t\t\t\t\tstrokeWeight: 4,                                                 // 141\n\t\t\t\t\t\tgeodesic: true,                                                  // 142\n\t\t\t\t\t\tmap: map.instance                                                // 143\n\t\t\t\t\t});                                                               //\n                                                                       //\n\t\t\t\t\tvar request = {                                                   // 147\n\t\t\t\t\t\torigin: nearestcab,                                              // 148\n\t\t\t\t\t\tdestination: passpos,                                            // 149\n\t\t\t\t\t\ttravelMode: google.maps.TravelMode.DRIVING                       // 150\n\t\t\t\t\t};                                                                //\n                                                                       //\n\t\t\t\t\tvar rendererOptions = {                                           // 153\n\t\t\t\t\t\tmap: map.instance,                                               // 154\n\t\t\t\t\t\tsuppressMarkers: true,                                           // 155\n\t\t\t\t\t\tpreserveViewport: true                                           // 156\n\t\t\t\t\t};                                                                //\n\t\t\t\t\tconsole.log(\"testing1\");                                          // 158\n                                                                       //\n\t\t\t\t\tdirectionsService = new google.maps.DirectionsService();          // 160\n\t\t\t\t\tdirectionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);\n\t\t\t\t\tdirectionsService.route(request, function (response, status) {    // 162\n\t\t\t\t\t\tconsole.log(\"testing2\");                                         // 163\n                                                                       //\n\t\t\t\t\t\tif (status == google.maps.DirectionsStatus.OK) {                 // 165\n\t\t\t\t\t\t\tconsole.log(\"testing3\");                                        // 166\n                                                                       //\n\t\t\t\t\t\t\tdirectionsDisplay.setDirections(response);                      // 168\n\t\t\t\t\t\t\tshowSteps(response);                                            // 169\n\t\t\t\t\t\t} else console.log(status);                                      //\n\t\t\t\t\t});                                                               //\n                                                                       //\n\t\t\t\t\tfunction showSteps(directionResult) {                             // 176\n\t\t\t\t\t\t// For each step, place a marker, and add the text to the marker's\n\t\t\t\t\t\t// info window. Also attach the marker to an array so we         //\n\t\t\t\t\t\t// can keep track of it and remove it when calculating new       //\n\t\t\t\t\t\t// routes.                                                       //\n\t\t\t\t\t\tvar legs = directionResult.routes[0].legs[0];                    // 181\n\t\t\t\t\t\tconsole.log(\"STEPS\");                                            // 182\n\t\t\t\t\t\tconsole.log(legs);                                               // 183\n\t\t\t\t\t\tvar steps = legs.steps;                                          // 184\n\t\t\t\t\t\tconsole.log(steps);                                              // 185\n\t\t\t\t\t\tfor (var i = 0; i < legs.length; i++) {                          // 186\n\t\t\t\t\t\t\tconsole.log(\"inn\");                                             // 187\n\t\t\t\t\t\t\tvar marker = new google.maps.Marker({                           // 188\n\t\t\t\t\t\t\t\tposition: legs[i].start_location,                              // 189\n\t\t\t\t\t\t\t\tmap: map.instance,                                             // 190\n\t\t\t\t\t\t\t\ticon: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n\t\t\t\t\t\t\t});                                                             //\n\t\t\t\t\t\t\tconsole.log(legs[i].start_location);                            // 193\n\t\t\t\t\t\t}                                                                //\n\t\t\t\t\t}                                                                 //\n\t\t\t\t}                                                                  //\n\t\t\t});                                                                 //\n\t\t\t//=====================================                             //\n\t\t});                                                                  //\n\t\t/*                                                                   //\n      GoogleMaps.ready('map', function(map) {                          //\n        var marker;                                                    //\n                                                                       //\n        // Create and move the marker when latLng changes.             //\n        self.autorun(function() {                                      //\n          var latLng = Geolocation.latLng();                           //\n          if (! latLng)                                                //\n            return;                                                    //\n                                                                       //\n          // If the marker doesn't yet exist, create it.               //\n          if (! marker) {                                              //\n            marker = new google.maps.Marker({                          //\n              position: new google.maps.LatLng(latLng.lat, latLng.lng),\n              map: map.instance                                        //\n            });                                                        //\n          }                                                            //\n          // The marker already exists, so we'll just change its position.\n          else {                                                       //\n            marker.setPosition(latLng);                                //\n          }                                                            //\n                                                                       //\n          // Center and zoom the map view onto the current position.   //\n          map.instance.setCenter(marker.getPosition());                //\n          map.instance.setZoom(MAP_ZOOM);                              //\n        });                                                            //\n      });                                                              //\n  \t*/                                                                  //\n\t});                                                                   //\n                                                                       //\n\tTemplate.map.helpers({                                                // 239\n\t\tgeolocationError: function () {                                      // 240\n\t\t\tvar error = Geolocation.error();                                    // 241\n\t\t\treturn error && error.message;                                      // 242\n\t\t},                                                                   //\n\t\tmapOptions: function () {                                            // 244\n\t\t\tvar latLng = Geolocation.latLng();                                  // 245\n\t\t\t// Initialize the map once we have the latLng.                      //\n\t\t\tif (GoogleMaps.loaded() && latLng) {                                // 247\n\t\t\t\treturn {                                                           // 248\n\t\t\t\t\tcenter: new google.maps.LatLng(latLng.lat, latLng.lng),           // 249\n\t\t\t\t\tzoom: MAP_ZOOM                                                    // 250\n\t\t\t\t};                                                                 //\n\t\t\t}                                                                   //\n\t\t}                                                                    //\n\t});                                                                   //\n                                                                       //\n\t//APP-1                                                               //\n                                                                       //\n\tTemplate.navigation.events({                                          // 258\n\t\t'click .logout': function (event) {                                  // 259\n\t\t\tevent.preventDefault();                                             // 260\n\t\t\tMeteor.logout();                                                    // 261\n\t\t\tRouter.go('login');                                                 // 262\n\t\t}                                                                    //\n\t});                                                                   //\n                                                                       //\n\t//define a default set of rules and error messages for our validate functions:\n                                                                       //\n\t$.validator.setDefaults({                                             // 271\n\t\trules: {                                                             // 272\n\t\t\temail: {                                                            // 273\n\t\t\t\trequired: true,                                                    // 274\n\t\t\t\temail: true                                                        // 275\n\t\t\t},                                                                  //\n\t\t\tpassword: {                                                         // 277\n\t\t\t\trequired: true,                                                    // 278\n\t\t\t\tminlength: 6                                                       // 279\n\t\t\t}                                                                   //\n\t\t},                                                                   //\n\t\tmessages: {                                                          // 282\n\t\t\temail: {                                                            // 283\n\t\t\t\trequired: \"You must enter an email address.\",                      // 284\n\t\t\t\temail: \"You've entered an invalid email address.\"                  // 285\n\t\t\t},                                                                  //\n\t\t\tpassword: {                                                         // 287\n\t\t\t\trequired: \"You must enter a password.\",                            // 288\n\t\t\t\tminlength: \"Your password must be at least {0} characters.\"        // 289\n\t\t\t}                                                                   //\n\t\t}                                                                    //\n\t});                                                                   //\n                                                                       //\n\tTemplate.login.onRendered(function () {                               // 295\n\t\tvar validator = $('.login').validate({                               // 296\n\t\t\tsubmitHandler: function (event) {                                   // 297\n\t\t\t\t//console.log(\"You just submitted the 'login' form.\");             //\n\t\t\t\tvar email = $('[name=email]').val();                               // 299\n\t\t\t\tvar password = $('[name=password]').val();                         // 300\n                                                                       //\n\t\t\t\tMeteor.loginWithPassword(email, password, function (error) {       // 302\n\t\t\t\t\tif (error) {                                                      // 303\n\t\t\t\t\t\t//\t\t\t\t\tconsole.log(error.reason);                                //\n\t\t\t\t\t\tif (error.reason == \"User not found\") {                          // 305\n\t\t\t\t\t\t\t//\t\t\t\t\tconsole.log(error.reason);                               //\n\t\t\t\t\t\t\tvalidator.showErrors({                                          // 307\n\t\t\t\t\t\t\t\temail: \"That email doesn't belong to a registered user.\"       // 308\n\t\t\t\t\t\t\t});                                                             //\n\t\t\t\t\t\t}                                                                //\n\t\t\t\t\t\tif (error.reason == \"Incorrect password\") {                      // 311\n\t\t\t\t\t\t\tvalidator.showErrors({                                          // 312\n\t\t\t\t\t\t\t\tpassword: \"You entered an incorrect password.\"                 // 313\n\t\t\t\t\t\t\t});                                                             //\n\t\t\t\t\t\t}                                                                //\n\t\t\t\t\t} else {                                                          //\n\t\t\t\t\t\tvar currentRoute = Router.current().route.getName();             // 318\n\t\t\t\t\t\tif (currentRoute == \"login\") {                                   // 319\n\t\t\t\t\t\t\tSession.set(\"passid\", Meteor.userId());                         // 320\n\t\t\t\t\t\t\tRouter.go(\"map\");                                               // 321\n\t\t\t\t\t\t}                                                                //\n\t\t\t\t\t}                                                                 //\n\t\t\t\t});                                                                //\n\t\t\t}                                                                   //\n\t\t});                                                                  //\n\t});                                                                   //\n                                                                       //\n\tTemplate.registerCab.onRendered(function () {                         // 332\n\t\tvar validator = $('.registerCab').validate({                         // 333\n                                                                       //\n\t\t\trules: {                                                            // 335\n\t\t\t\tusrname: {                                                         // 336\n\t\t\t\t\trequired: true,                                                   // 337\n\t\t\t\t\tminlength: 4                                                      // 338\n\t\t\t\t},                                                                 //\n\t\t\t\tmobile: {                                                          // 340\n\t\t\t\t\trequired: true,                                                   // 341\n\t\t\t\t\tminlength: 10,                                                    // 342\n\t\t\t\t\tdigits: true                                                      // 343\n\t\t\t\t},                                                                 //\n\t\t\t\tlatitude: {                                                        // 345\n\t\t\t\t\trequired: true                                                    // 346\n\t\t\t\t},                                                                 //\n\t\t\t\tlongitude: {                                                       // 348\n\t\t\t\t\trequired: true                                                    // 349\n\t\t\t\t}                                                                  //\n\t\t\t},                                                                  //\n\t\t\tmessages: {                                                         // 352\n\t\t\t\tusrname: {                                                         // 353\n\t\t\t\t\trequired: \"You must enter a user name.\",                          // 354\n\t\t\t\t\tminlength: \"Your User name must be at least {0} characters.\"      // 355\n\t\t\t\t},                                                                 //\n\t\t\t\tmobile: {                                                          // 357\n\t\t\t\t\trequired: \"You must enter a mobile number.\",                      // 358\n\t\t\t\t\tminlength: \"Your number must be at least {0} characters.\",        // 359\n\t\t\t\t\tdigits: \"You must enter valid digits.\"                            // 360\n\t\t\t\t},                                                                 //\n\t\t\t\tlatitude: {                                                        // 362\n\t\t\t\t\trequired: \"You must enter a latitude.\"                            // 363\n\t\t\t\t},                                                                 //\n\t\t\t\tlongitude: {                                                       // 365\n\t\t\t\t\trequired: \"You must enter a longitude.\"                           // 366\n\t\t\t\t}                                                                  //\n                                                                       //\n\t\t\t},                                                                  //\n                                                                       //\n\t\t\tsubmitHandler: function (event) {                                   // 372\n\t\t\t\tvar email = $('[name=email]').val();                               // 373\n\t\t\t\tvar password = $('[name=password]').val();                         // 374\n\t\t\t\tvar mobile = $('[name=mobile]').val();                             // 375\n\t\t\t\tvar usrname = $('[name=usrname]').val();                           // 376\n\t\t\t\tvar type = $('[name=typeofuser]').val();                           // 377\n\t\t\t\tvar latitude = $('[name=latitude]').val();                         // 378\n\t\t\t\tvar longitude = $('[name=longitude]').val();                       // 379\n\t\t\t\tvar options = {                                                    // 380\n\t\t\t\t\temail: email,                                                     // 381\n\t\t\t\t\tpassword: password,                                               // 382\n\t\t\t\t\tprofile: {                                                        // 383\n\t\t\t\t\t\tname: usrname,                                                   // 384\n\t\t\t\t\t\tmobile: mobile,                                                  // 385\n\t\t\t\t\t\ttypeofuser: type,                                                // 386\n\t\t\t\t\t\tcoordinates: {                                                   // 387\n\t\t\t\t\t\t\tlat: latitude,                                                  // 388\n\t\t\t\t\t\t\tlng: longitude                                                  // 389\n\t\t\t\t\t\t}                                                                //\n\t\t\t\t\t},                                                                //\n\t\t\t\t\tsecretAttribute: \"secretString\"                                   // 392\n\t\t\t\t};                                                                 //\n                                                                       //\n\t\t\t\tAccounts.createUser(options, function (error) {                    // 395\n\t\t\t\t\tif (error) {                                                      // 396\n\t\t\t\t\t\tif (error.reason == \"Email already exists.\") {                   // 397\n\t\t\t\t\t\t\tvalidator.showErrors({                                          // 398\n\t\t\t\t\t\t\t\temail: \"That email already belongs to a registered user.\"      // 399\n\t\t\t\t\t\t\t});                                                             //\n\t\t\t\t\t\t}                                                                //\n\t\t\t\t\t} else {                                                          //\n\t\t\t\t\t\t//this.render('map', {data: {title: 'Now You are a Registered Cab Driver at Devois'}});\n\t\t\t\t\t\tRouter.go(\"map\"); // Redirect user if registration succeeds      // 404\n\t\t\t\t\t}                                                                 //\n\t\t\t\t});                                                                //\n\t\t\t}                                                                   //\n\t\t});                                                                  //\n\t\t//var res = Meteor.users.find().fetch();                             //\n\t\t//console.log(\"RES\");                                                //\n\t\t//console.log(res);                                                  //\n\t});                                                                   //\n                                                                       //\n\tTemplate.registerPass.onRendered(function () {                        // 417\n\t\tvar validator = $('.registerPass').validate({                        // 418\n                                                                       //\n\t\t\trules: {                                                            // 420\n\t\t\t\tusrname: {                                                         // 421\n\t\t\t\t\trequired: true,                                                   // 422\n\t\t\t\t\tminlength: 4                                                      // 423\n\t\t\t\t},                                                                 //\n\t\t\t\tmobile: {                                                          // 425\n\t\t\t\t\trequired: true,                                                   // 426\n\t\t\t\t\tminlength: 10,                                                    // 427\n\t\t\t\t\tdigits: true                                                      // 428\n\t\t\t\t}                                                                  //\n\t\t\t},                                                                  //\n\t\t\tmessages: {                                                         // 431\n\t\t\t\tusrname: {                                                         // 432\n\t\t\t\t\trequired: \"You must enter a user name.\",                          // 433\n\t\t\t\t\tminlength: \"Your User name must be at least {0} characters.\"      // 434\n\t\t\t\t},                                                                 //\n\t\t\t\tmobile: {                                                          // 436\n\t\t\t\t\trequired: \"You must enter a mobile number.\",                      // 437\n\t\t\t\t\tminlength: \"Your number must be at least {0} characters.\",        // 438\n\t\t\t\t\tdigits: \"You must enter valid digits.\"                            // 439\n\t\t\t\t}                                                                  //\n\t\t\t},                                                                  //\n                                                                       //\n\t\t\tsubmitHandler: function (event) {                                   // 443\n\t\t\t\tvar email = $('[name=email]').val();                               // 444\n\t\t\t\tvar password = $('[name=password]').val();                         // 445\n\t\t\t\tvar mobile = $('[name=mobile]').val();                             // 446\n\t\t\t\tvar usrname = $('[name=usrname]').val();                           // 447\n\t\t\t\tvar type = $('[name=typeofuser]').val();                           // 448\n\t\t\t\tvar options = {                                                    // 449\n\t\t\t\t\temail: email,                                                     // 450\n\t\t\t\t\tpassword: password,                                               // 451\n\t\t\t\t\tprofile: {                                                        // 452\n\t\t\t\t\t\tname: usrname,                                                   // 453\n\t\t\t\t\t\tmobile: mobile,                                                  // 454\n\t\t\t\t\t\ttypeofuser: type,                                                // 455\n\t\t\t\t\t\tcoordinates: {                                                   // 456\n\t\t\t\t\t\t\tlat: 0,                                                         // 457\n\t\t\t\t\t\t\tlng: 0                                                          // 458\n\t\t\t\t\t\t}                                                                //\n\t\t\t\t\t},                                                                //\n\t\t\t\t\tsecretAttribute: \"secretString\"                                   // 461\n\t\t\t\t};                                                                 //\n                                                                       //\n\t\t\t\tAccounts.createUser(options, function (error) {                    // 464\n\t\t\t\t\tif (error) {                                                      // 465\n\t\t\t\t\t\tif (error.reason == \"Email already exists.\") {                   // 466\n\t\t\t\t\t\t\tvalidator.showErrors({                                          // 467\n\t\t\t\t\t\t\t\temail: \"That email already belongs to a registered user.\"      // 468\n\t\t\t\t\t\t\t});                                                             //\n\t\t\t\t\t\t}                                                                //\n\t\t\t\t\t} else {                                                          //\n\t\t\t\t\t\tSession.set(\"passid\", Meteor.userId());                          // 473\n\t\t\t\t\t\tRouter.go(\"map\"); // Redirect user if registration succeeds      // 474\n\t\t\t\t\t}                                                                 //\n\t\t\t\t});                                                                //\n\t\t\t}                                                                   //\n\t\t});                                                                  //\n\t});                                                                   //\n}                                                                      //\n                                                                       //\nRouter.route('/registerCab');                                          // 487\nRouter.route('/registerPass');                                         // 488\n                                                                       //\nRouter.route('/map');                                                  // 490\nRouter.route('/login');                                                // 491\n                                                                       //\nRouter.route('/', {                                                    // 493\n\tname: 'home',                                                         // 494\n\ttemplate: 'home'                                                      // 495\n});                                                                    //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/googlemaps-geolocation.js","sourceMap":{"version":3,"sources":["/googlemaps-geolocation.js"],"names":[],"mappings":"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","file":"/googlemaps-geolocation.js","sourcesContent":["\n\nif (Meteor.isServer) {\n// for setting extra fields other then username and password in accounts-ui\nAccounts.onCreateUser(function(options, user) {\n    if (options.secretAttribute)\n        user.secretAttribute = options.secretAttribute;\n\n    if (options.profile)\n        user.profile = options.profile;\n\n    return user;\n});\n\n}\n\n\nRouter.configure({\n    layoutTemplate: 'main'\n});\n\n\nif (Meteor.isClient) {\n\tvar flag = 'true';\n  var MAP_ZOOM = 12;\n\n  //Session.set('apimaps', false);\n  Session.set('epoly', false);\n  \n  Meteor.startup(function() {\n    GoogleMaps.load();\n/*\n\t$.getScript('http://maps.google.com/maps/api/js?sensor=false', function(){\n\t// script has loaded\n\t  Session.set('apimaps', true);\n\t });\n*/\n\t $.getScript('http://www.geocodezip.com/scripts/v3_epoly.js', function(){\n\t// script has loaded\n\t  Session.set('epoly', true);\n\t });\n \n \n  });\n\n  Template.map.onCreated(function() {\n    var self = this;\n\t\n    GoogleMaps.ready('map', function(map) {\n/*\t\t  google.maps.event.addListener(map.instance, 'click', function(event) {\n\t\t  Markers.insert({ lat: event.latLng.lat(), lng: event.latLng.lng() });\n\t\t  //console.log(\"clicked\");\n\t});\n*/\n\tvar markers = {};\n\tvar i = 1;\n/*\tMarkers.find().observe({  \n\t\tadded: function(document) {\n\t\t\t// Create a marker for this document\n\t\t\ti++;\n\t\t    window.setTimeout(function() {\n\t\t    var marker = new google.maps.Marker({\n\t\t\t  draggable: true,\n\t\t\t  animation: google.maps.Animation.DROP,\n\t\t\t  position: new google.maps.LatLng(document.lat, document.lng),\n\t\t\t  map: map.instance,\n\t\t\t  id: document._id\n\t\t\t});\n\t\t\t}, i*200);\n\t    }\n\t});\n\t*/\n\tMeteor.users.find().observe({  \n\t\tadded: function(document) {\n\t\t\t// Create a marker for this document\n\t\t\ti++;\n\t\t    window.setTimeout(function() {\n\t\t    var marker = new google.maps.Marker({\n\t\t\t  draggable: true,\n\t\t\t  animation: google.maps.Animation.DROP,\n\t\t\t  position: new google.maps.LatLng(document.profile.coordinates.lat, document.profile.coordinates.lng),\n\t\t\t  map: map.instance,\n\t\t\t  id: document._id\n\t\t\t});\n\t\t\t}, i*200);\n\t    }\n\t});\n\t\n\t\n\t\n\tgoogle.maps.event.addListener(map.instance, 'click', function(event) {\n      \n\t  if(Session.get(\"passid\") === Meteor.userId()){\n\t   var passengerlat = event.latLng.lat();\n\t  var passengerLng = event.latLng.lng();\n\t  console.log(\"clicked pannenger\");\n\t  console.log(event.latLng.lat());\n\t  Session.set(\"passlat\",event.latLng.lat());\n\t  Session.set(\"passlng\",event.latLng.lng());\n\t  console.log(event.latLng.lng());\n\t  if(flag == 'true'){\n\t\tvar passmarker = new google.maps.Marker({\n\t\t\t  draggable: true,\n\t\t\t  animation: google.maps.Animation.DROP,\n\t\t\t  position: new google.maps.LatLng(event.latLng.lat(), event.latLng.lng()),\n\t\t\t  map: map.instance,\n\t\t\t  icon:'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'\n\t\t\t});\n\t\t\tflag = 'false';\n\t  }\n\t\t google.maps.LatLng.prototype.distanceFrom = function(lat_lng) {\n\t\t\t  var lat = [this.lat(), lat_lng.lat()]\n\t\t\t  var lng = [this.lng(), lat_lng.lng()]\n\t\t\t  var R = 6378137;\n\t\t\t  var dLat = (lat[1]-lat[0]) * Math.PI / 180;\n\t\t\t  var dLng = (lng[1]-lng[0]) * Math.PI / 180;\n\t\t\t  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n\t\t\t  Math.cos(lat[0] * Math.PI / 180 ) * Math.cos(lat[1] * Math.PI / 180 ) *\n\t\t\t  Math.sin(dLng/2) * Math.sin(dLng/2);\n\t\t\t  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\t\t\t  var d = R * c;\n\t\t\t  return (d);\n\t\t\t}\n\t\t\tvar cabloc = [];\n\t\t\tvar distarry = [];\n\t\t\tvar passpos = new google.maps.LatLng(Session.get(\"passlat\"),Session.get(\"passlng\"));\n\t\t\tvar data = Markers.find().fetch();\n\t\t\t\t\n\t\t\tfor(var k=0; k<data.length;k++){\n\t\t\t\tcabloc[k] = new google.maps.LatLng(data[k].lat, data[k].lng);\n\t\t\t\tdistarry[k] = cabloc[k].distanceFrom(passpos);\n\t\t\t\n\t\t\t}\n\t\t\tvar minval = _.min(distarry);\n\t\t\tvar indx = _.indexOf(distarry, minval);\n\t\t\tvar nearestcab = new google.maps.LatLng(data[indx].lat, data[indx].lng);\n\t\t\t polyline = new google.maps.Polyline({\n                path: [nearestcab, passpos],\n                strokeColor: \"#FF0000\",\n                strokeOpacity: 0.5,\n                strokeWeight: 4,\n                geodesic: true,\n                map: map.instance\n            });\n\t\t\n\nvar request = {\n            origin: nearestcab,\n            destination: passpos,\n            travelMode: google.maps.TravelMode.DRIVING\n\t\t\t};\n\t\t\t\n\t\t\tvar rendererOptions = {\n\t\t\t\tmap: map.instance,\n\t\t\t\tsuppressMarkers : true,\n\t\t\t\tpreserveViewport: true\n\t\t\t}\n\t\t\tconsole.log(\"testing1\");\n\n\t\t\tdirectionsService = new google.maps.DirectionsService();\n\t\t\tdirectionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);     \n            directionsService.route(request, function(response, status) {\n\t\t\t\t\tconsole.log(\"testing2\");\n\n\t\t\t\tif (status == google.maps.DirectionsStatus.OK) {\n\t\t\t\tconsole.log(\"testing3\");\n\n\t\t\t\tdirectionsDisplay.setDirections(response);\n\t\t\t\tshowSteps(response);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tconsole.log(status);\n\t\t\t});\n\n\t\t\t\n\t\t\tfunction showSteps(directionResult) {\n\t\t\t// For each step, place a marker, and add the text to the marker's\n\t\t\t// info window. Also attach the marker to an array so we\n\t\t\t// can keep track of it and remove it when calculating new\n\t\t\t// routes.\n\t\t\tvar legs = directionResult.routes[0].legs[0];\n\t\t\tconsole.log(\"STEPS\");\n\t\t\tconsole.log(legs);\n\t\t\t    var steps = legs.steps;\n\t\t\t\tconsole.log(steps);\n\t\t    for (var i = 0; i < legs.length; i++) {\n\t\t\t\tconsole.log(\"inn\");\n\t\t\t\tvar marker = new google.maps.Marker({\n\t\t\t\t\tposition: legs[i].start_location,\n\t\t\t\t\tmap: map.instance,\n\t\t\t\t\ticon:'http://maps.google.com/mapfiles/ms/icons/green-dot.png'\n\t\t\t\t});\n\t\t\tconsole.log(legs[i].start_location);\n\t\t\t}\n\t\t\t}\n\n\n\n\n\t\t\n\t  }  \n    });\n\t//=====================================\n\t\t\n\t\t\t\n\t\n\t\n});\n/*\n    GoogleMaps.ready('map', function(map) {\n      var marker;\n\n      // Create and move the marker when latLng changes.\n      self.autorun(function() {\n        var latLng = Geolocation.latLng();\n        if (! latLng)\n          return;\n\n        // If the marker doesn't yet exist, create it.\n        if (! marker) {\n          marker = new google.maps.Marker({\n            position: new google.maps.LatLng(latLng.lat, latLng.lng),\n            map: map.instance\n          });\n        }\n        // The marker already exists, so we'll just change its position.\n        else {\n          marker.setPosition(latLng);\n        }\n\n        // Center and zoom the map view onto the current position.\n        map.instance.setCenter(marker.getPosition());\n        map.instance.setZoom(MAP_ZOOM);\n      });\n    });\n\t*/\n  });\n\n  Template.map.helpers({\n    geolocationError: function() {\n      var error = Geolocation.error();\n      return error && error.message;\n    },\n    mapOptions: function() {\n      var latLng = Geolocation.latLng();\n      // Initialize the map once we have the latLng.\n      if (GoogleMaps.loaded() && latLng) {\n        return {\n          center: new google.maps.LatLng(latLng.lat, latLng.lng),\n          zoom: MAP_ZOOM\n        };\n      }\n    }\n  });\n  \n  //APP-1\n\n  Template.navigation.events({\n    'click .logout': function(event){\n        event.preventDefault();\n        Meteor.logout();\n        Router.go('login');\n    }\n});  \n\n  \n  //define a default set of rules and error messages for our validate functions:\n\n\n\n$.validator.setDefaults({\n    rules: {\n        email: {\n            required: true,\n            email: true\n        },\n        password: {\n            required: true,\n            minlength: 6\n        }\n    },\n    messages: {\n        email: {\n            required: \"You must enter an email address.\",\n            email: \"You've entered an invalid email address.\"\n        },\n        password: {\n            required: \"You must enter a password.\",\n            minlength: \"Your password must be at least {0} characters.\"\n        }\n    }\n});\n\n  \n  Template.login.onRendered(function(){\n\t  var validator = $('.login').validate({\n\t\tsubmitHandler: function(event){\n            //console.log(\"You just submitted the 'login' form.\");\n\t\t\t        var email = $('[name=email]').val();\n        var password = $('[name=password]').val();\n\t\t\n        Meteor.loginWithPassword(email, password, function(error){\n\t\t\t\tif(error){\n//\t\t\t\t\tconsole.log(error.reason);\n\t\t\t\t\tif(error.reason == \"User not found\"){\n\t//\t\t\t\t\tconsole.log(error.reason);\n\t\t\t\t\t\tvalidator.showErrors({\n\t\t\t\t\t\t\temail: \"That email doesn't belong to a registered user.\"   \n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif(error.reason == \"Incorrect password\"){\n\t\t\t\t\t\tvalidator.showErrors({\n\t\t\t\t\t\t\tpassword: \"You entered an incorrect password.\"    \n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t    \n\t\t\t\telse {\n                    var currentRoute = Router.current().route.getName();\n                    if(currentRoute == \"login\"){\n\t\t\t\t\t\tSession.set(\"passid\", Meteor.userId());\n\t\t\t\t\t\tRouter.go(\"map\");\n                    }\n                }\n\t\t});\n\t\t\n\n        }\n    });\n});\n  \n  \n  Template.registerCab.onRendered(function(){\n\t  var validator = $('.registerCab').validate({\n\t\t\n\t\t\trules: {\n\t\t\tusrname: {\n\t\t\t\trequired: true,\n\t\t\t\tminlength: 4\n\t\t\t},\n\t\t\tmobile: {\n\t\t\t\trequired: true,\n\t\t\t\tminlength: 10,\n\t\t\t\tdigits: true\n\t\t\t},\n\t\t\tlatitude: {\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tlongitude: {\n\t\t\t\trequired: true\n\t\t\t}\n\t\t},\n\t\tmessages: {\n\t\t\tusrname: {\n\t\t\t\trequired: \"You must enter a user name.\",\n\t\t\t\tminlength: \"Your User name must be at least {0} characters.\"\n\t\t\t},\n\t\t\tmobile: {\n\t\t\t\trequired: \"You must enter a mobile number.\",\n\t\t\t\tminlength: \"Your number must be at least {0} characters.\",\n\t\t\t\tdigits: \"You must enter valid digits.\"\n\t\t\t},\n\t\t\tlatitude: {\n\t\t\t\trequired: \"You must enter a latitude.\"\n\t\t\t},\n\t\t\tlongitude: {\n\t\t\t\trequired: \"You must enter a longitude.\"\n\t\t\t}\n\t\t\t\t\n\t\t},\n\t  \n\n\t\tsubmitHandler: function(event){\n\t\tvar email = $('[name=email]').val();\n        var password = $('[name=password]').val();\n        var mobile = $('[name=mobile]').val();\n        var usrname = $('[name=usrname]').val();\n        var type = $('[name=typeofuser]').val();\n\t\tvar latitude = $('[name=latitude]').val();\n        var longitude = $('[name=longitude]').val();\n\t\tvar options = {\n\t\t\temail: email,\n\t\t\tpassword: password,\n\t\t\tprofile: {\n\t\t\t\tname: usrname,\n\t\t\t\tmobile: mobile,\n\t\t\t\ttypeofuser: type,\n\t\t\t\tcoordinates: {\n                        lat: latitude,\n                        lng: longitude\n                    }\n\t\t\t},\n\t\t\tsecretAttribute: \"secretString\"\n\t\t};\n\n\t\tAccounts.createUser(options, function(error){\n\t\t\tif(error){\n\t\t\t\tif(error.reason == \"Email already exists.\"){\n\t\t\t\t\tvalidator.showErrors({\n\t\t\t\t\t\temail: \"That email already belongs to a registered user.\"   \n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//this.render('map', {data: {title: 'Now You are a Registered Cab Driver at Devois'}});\n\t\t\t\tRouter.go(\"map\"); // Redirect user if registration succeeds\n\t\t\t}\n\t\t});\n\t  \n        }\n    });\n\t//var res = Meteor.users.find().fetch();\n\t//console.log(\"RES\");\n\t//console.log(res);\n});\n  \n\n \n Template.registerPass.onRendered(function(){\n\t  var validator = $('.registerPass').validate({\n\t\t\n\t\t\trules: {\n\t\t\tusrname: {\n\t\t\t\trequired: true,\n\t\t\t\tminlength: 4\n\t\t\t},\n\t\t\tmobile: {\n\t\t\t\trequired: true,\n\t\t\t\tminlength: 10,\n\t\t\t\tdigits: true\n\t\t\t}\n\t\t},\n\t\tmessages: {\n\t\t\tusrname: {\n\t\t\t\trequired: \"You must enter a user name.\",\n\t\t\t\tminlength: \"Your User name must be at least {0} characters.\"\n\t\t\t},\n\t\t\tmobile: {\n\t\t\t\trequired: \"You must enter a mobile number.\",\n\t\t\t\tminlength: \"Your number must be at least {0} characters.\",\n\t\t\t\tdigits: \"You must enter valid digits.\"\n\t\t\t}\n\t\t},\n\n\t\tsubmitHandler: function(event){\n\t\tvar email = $('[name=email]').val();\n        var password = $('[name=password]').val();\n        var mobile = $('[name=mobile]').val();\n        var usrname = $('[name=usrname]').val();\n        var type = $('[name=typeofuser]').val();\n\t\tvar options = {\n\t\t\temail: email,\n\t\t\tpassword: password,\n\t\t\tprofile: {\n\t\t\t\tname: usrname,\n\t\t\t\tmobile: mobile,\n\t\t\t\ttypeofuser: type,\n\t\t\t\tcoordinates: {\n                        lat: 0,\n                        lng: 0\n                    }\n\t\t\t},\n\t\t\tsecretAttribute: \"secretString\"\n\t\t};\n\n\t\tAccounts.createUser(options, function(error){\n\t\t\tif(error){\n\t\t\t\tif(error.reason == \"Email already exists.\"){\n\t\t\t\t\tvalidator.showErrors({\n\t\t\t\t\t\temail: \"That email already belongs to a registered user.\"   \n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\t\t\t\n\t\t\telse {\n\t\t\t\tSession.set(\"passid\", Meteor.userId());\n\t\t\t\tRouter.go(\"map\"); // Redirect user if registration succeeds\n\t\t\t}\n\t\t});\n\t\t\n        }\n    });\n});\n \n  \n}\n\n\n\nRouter.route('/registerCab');\nRouter.route('/registerPass');\n\nRouter.route('/map');\nRouter.route('/login');\n\nRouter.route('/', {\n    name: 'home',\n    template: 'home'\n});\n\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// model.js                                                            //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\n// globalvars                                                          //\nCabDrivers = new Mongo.Collection('drivers');                          // 2\npassengersList = new Mongo.Collection('passengers');                   // 3\nMarkers = new Mongo.Collection('markers');                             // 4\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/model.js","sourceMap":{"version":3,"sources":["meteor://ðŸ’»app/model.js"],"names":[],"mappings":";;;;;;;;;AACA,UAAU,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;AAC7C,cAAc,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;AACpD,OAAO,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,iC","file":"/model.js","sourcesContent":["// globalvars\nCabDrivers = new Mongo.Collection('drivers');\npassengersList = new Mongo.Collection('passengers');\nMarkers = new Mongo.Collection('markers');"]}}]